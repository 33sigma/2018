---
title: 'Midterm #2'
output: html_document
---
### Question 3

Read the following data set into R:

```{r, message=FALSE}
require(tidyverse)
ny_airquality <- read_csv("https://raw.githubusercontent.com/datasciencelabs/data/master/ny_airquality.csv")
```

Use the tidyr `separate` function to split the `Date` variable into year, month and day. Then use the `summarize` function to compute the average temperature for each month. What was the average temperature in July?

* 65 degrees Fahrenheit
* 88 degrees Fahrenheit
* 76 degrees Fahrenheit
* 84 degrees Fahrenheit


### Question 4

Generate data using the following piece of code:

```{r}
set.seed(1)
n <- 10^6
x <- 10^rnorm(n, 2, 0.5)
```

Now take a random sample of size 100 and define the median *M*:
```{r}
N <- 100
X <- sample(x, N)
M <- median(X)
```

Note that *M* is a random variable. Which of the following best approximates the distribution of *M*?

* The Central Limit Theorem tells us that M is approximated with a normal distribution with mean `mean(x)` and standard error `sd(x)/sqrt(N)`
* The Central Limit Theorem tells us that M is approximated with a normal distribution with mean `median(x)` and standard error `sd(x)/sqrt(N)`
* The Central Limit Theorem, as we learned it, does not apply here. A Monte Carlo simulation tells us that the data has fatter tails than a normal distribution. The expected value and standard error of *M* are 101 and 14.5 respectively.
* The Central Limit Theorem, as we learned it, does not apply here. A Monte Carlo simulation tells us that the data is approximately normal with mean 101 and standard error 0.145.


### Question 5

Load the Lahman library of baseball statistics.
```{r}
library(Lahman)
```

What was the observed correlation between team home runs (HR) and team base-on-balls (BB) in 1999?

* 0.345
* 0.833
* 0.023
* Impossible to compute


### Question 6

Read in [this data](https://raw.githubusercontent.com/datasciencelabs/data/master/midterm2-shoe-size.csv). It includes *results* from a math test administered to a random sample of students in an elementary school.

Explore the *relationship* between the columns, in particular, note the correlation between *shoe size* and *math scores*. Which of the following conclusions would you draw from this data?


* Shoe size and math ability are clearly not related. Thus, the observed correlation is 0.
* Children with small feet get made fun of and the pressure makes them not test well.
* There must be a mistake in the data because the correlation between scores and shoe size is 0.95!
* Grade is a confounding factor and explains the observed high correlation. If we stratify by grade there is no signifiant correlation.

### Question 7

After the 2008 Olympics, a small country that will remain unnamed was very proud of the fact that they won more medals than any previous year.

However, Mr. Downer, the president of the Olympic committee, warned the athletes to not rest on their laurels (as he had seen many times).

He noted that *the best performing* small countries in any given year *rarely matched their performance* 4 years later.

Which statement best explains this observation?

* Data shows that athletes that win 4 or more medals tend to win only about 3 in the next Olympics. Clearly they become overconfident and don't train as hard.
* This is simply an example of the regression fallacy.
* Other small countries are inspired to train harder, thus taking some of the medals that would otherwise go to Mr. Downer's team.
* To win all the medals they probably overspent and have no money left to train for the next Olympics.

### Question 8

Run the following code:
```{r}
m <- 100
n <- 10
set.seed(1)
x <- matrix(rnorm(n*m), m, n)
```

What is the Euclidean distance between columns 3 and 7?

* 15.3
* 4.15
* 234.5
* 1.53


### Question 9

Run the following code:

```{r}
set.seed(1)
p <- 10
n <- 100
center1 <- 1:p
center2 <- 1 + p + rep(c(-0.1, 0.1), each = p/2)
X <- rbind(t(center1 + t(matrix(rnorm(n*p), n, p))), t(center2 + t(matrix(rnorm(n*p), n, p))))
y <- rep(c(0,1), each = n)
```

Apply principal component analysis to *X*.

Which of the 10 PCs best predicts *y*?

* 1st
* 2nd
* 3rd
* 4th

### Question 10

Apply *k* nearest neighbors with *k* = 25 to the data created in Question 9 to build a predictor of the outcomes *y* from the predictors contained in *X*.

Now load these three new sets of predictors. What are your predictions for the data with [these observations](https://raw.githubusercontent.com/datasciencelabs/data/master/midterm2-X.csv)?

* all 1s
* all 0s
* 0, 0, 1
* 1, 0, 0

### Question 11

Read in the following [data](https://raw.githubusercontent.com/datasciencelabs/data/master/midterm2-dat.csv). The data was generated using the following model:
Y is binomial with logit{Pr($Y = 1 | X = x$)} = $f(x)$

Use data exploration to estimate $f(x)$. Which of the following does data exploration suggest best describes $f(x)$?

Hint: recall what **conditional probability** means.

* A sine wave
* A parabola
* A straight line
* A flat horizontal line

### Question 12

Load the Lahman library of baseball statistics. We want to estimate the effect of team bases on balls (BB) on team runs (R) using the following model:

$R = \alpha + BB\beta + \epsilon$

We want to estimate $\beta$ using the data from just one year. Assume the model holds for each year starting in 1961. Which of the following best represents an approximate 95% confidence interval for a least squares estimate of $\beta$ **based on data from just one year**?

* [0.1, 0.9]
* [0.6, 0.7]
* [0.3, 0.75]
* [0.47, 0.58]

### Question 14

For this question we will use the following two tables created in questions 6 and 8:
```{r, message = FALSE}
master <- read_csv("https://raw.githubusercontent.com/datasciencelabs/data/master/Master.csv")
player_info <- master %>% select(playerID, nameFirst, nameLast, birthYear, height)
salaries <- read_csv("https://raw.githubusercontent.com/datasciencelabs/data/master/Salaries.csv")
```

Perform the following operations:

1. Use the group_by and summarize functions to create a table with one row for each player that shows their average salary
2. Use one of the `dplyr` join functions to add average salaries to the `player_info` table. 

Of the players born in 1971, who had the highest average salary? Hint: After operations 1 and 2 above, use the `arrange` and `desc` function to order the table by average salary.

* Alex Rodriguez
* Barry Bonds
* Pedro Martinez
* Jason Giambi
* Tavo Alvarez
* Jorge Posada
